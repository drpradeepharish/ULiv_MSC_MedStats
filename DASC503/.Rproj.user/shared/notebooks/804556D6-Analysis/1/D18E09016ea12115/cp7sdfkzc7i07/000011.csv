"0",""
"0","#Sex vs Smoking Status"
"0",""
"0",""
"0","left_join("
"0","  tblGraphNumerator %>% group_by(sex, smoking_status) %>% "
"0","    summarise(diagnosed = sum(ever_diagnosed)),"
"0","  tblDenominator %>% group_by(sex, smoking_status) %>% "
"0","    summarise(patient_years = sum(total_patient_years)),"
"0","  by = join_by(""sex"" == ""sex"", ""smoking_status"" == ""smoking_status"")) %>%"
"0","  ungroup() %>% "
"0","  mutate(Incidence = diagnosed / patient_years * 10000,"
"0","         CI = pois.approx(diagnosed, pt = patient_years) * 10000) -> ggTemp "
"2","`summarise()` has grouped output by 'sex'. You can override using the `.groups` argument."
"2","`summarise()` has grouped output by 'sex'. You can override using the `.groups` argument."
"0","ggTemp %>%"
"0","  mutate(sex = gsub(""^men"",""Men"", sex),"
"0","         sex = gsub(""^women"",""Women"", sex),"
"0","         smoking_status = gsub(""^ex_smoker"",""Ex smoker"", smoking_status), "
"0","         smoking_status = gsub(""^smoker"",""Smoker"", smoking_status),"
"0","         smoking_status = gsub(""^never_smoker"",""Never smoked"", smoking_status)) %>% "
"0","  ggplot(aes("
"0","    x = interaction(sex, smoking_status, sep = ""!""),"
"0","    y = Incidence,"
"0","    #group = smoking_status,"
"0","    colour = sex,"
"0","    shape = sex"
"0","    #size = !!sym(strSize)"
"0","  )) +"
"0","  geom_boxplot(show.legend = FALSE) +"
"0","  geom_errorbar(mapping = aes(ymin = CI$lower, ymax = CI$upper), show.legend = FALSE) +"
"0","  scale_x_discrete(guide = guide_axis_nested(delim = ""!""),"
"0","                     name = """","
"0","                     drop = FALSE) +"
"0","  ggsci::scale_color_aaas() +"
"0","  theme_cowplot(12) +"
"0","  ylab(""Incidence per 100k person years"")"
